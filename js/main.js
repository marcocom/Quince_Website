/*
 * fancyBox - jQuery Plugin
 * version: 2.1.5 (Fri, 14 Jun 2013)
 * @requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
(function(m,p,j,e){var q=j("html"),d=j(m),a=j(p),r=j.fancybox=function(){r.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,f=p.createTouch!==e,k=function(s){return s&&s.hasOwnProperty&&s instanceof j},b=function(s){return s&&j.type(s)==="string"},n=function(s){return b(s)&&s.indexOf("%")>0},h=function(s){return(s&&!(s.style.overflow&&s.style.overflow==="hidden")&&((s.clientWidth&&s.scrollWidth>s.clientWidth)||(s.clientHeight&&s.scrollHeight>s.clientHeight)))},o=function(u,t){var s=parseInt(u,10)||0;if(t&&n(u)){s=r.getViewport()[t]/100*s}return Math.ceil(s)},g=function(s,t){return o(s,t)+"px"};j.extend(r,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!f,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:true,title:true},onCancel:j.noop,beforeLoad:j.noop,afterLoad:j.noop,beforeShow:j.noop,afterShow:j.noop,beforeChange:j.noop,beforeClose:j.noop,afterClose:j.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(t,s){if(!t){return}if(!j.isPlainObject(s)){s={}}if(false===r.close(true)){return}if(!j.isArray(t)){t=k(t)?j(t).get():[t]}j.each(t,function(y,z){var x={},u,C,A,B,w,D,v;if(j.type(z)==="object"){if(z.nodeType){z=j(z)}if(k(z)){x={href:z.data("fancybox-href")||z.attr("href"),title:z.data("fancybox-title")||z.attr("title"),isDom:true,element:z};if(j.metadata){j.extend(true,x,z.metadata())}}else{x=z}}u=s.href||x.href||(b(z)?z:null);C=s.title!==e?s.title:x.title||"";A=s.content||x.content;B=A?"html":(s.type||x.type);if(!B&&x.isDom){B=z.data("fancybox-type");if(!B){w=z.prop("class").match(/fancybox\.(\w+)/);B=w?w[1]:null}}if(b(u)){if(!B){if(r.isImage(u)){B="image"}else{if(r.isSWF(u)){B="swf"}else{if(u.charAt(0)==="#"){B="inline"}else{if(b(z)){B="html";A=z}}}}}if(B==="ajax"){D=u.split(/\s+/,2);u=D.shift();v=D.shift()}}if(!A){if(B==="inline"){if(u){A=j(b(u)?u.replace(/.*(?=#[^\s]+$)/,""):u)}else{if(x.isDom){A=z}}}else{if(B==="html"){A=u}else{if(!B&&!u&&x.isDom){B="inline";A=z}}}}j.extend(x,{href:u,type:B,content:A,title:C,selector:v});t[y]=x});r.opts=j.extend(true,{},r.defaults,s);if(s.keys!==e){r.opts.keys=s.keys?j.extend({},r.defaults.keys,s.keys):false}r.group=t;return r._start(r.opts.index)},cancel:function(){var s=r.coming;if(!s||false===r.trigger("onCancel")){return}r.hideLoading();if(r.ajaxLoad){r.ajaxLoad.abort()}r.ajaxLoad=null;if(r.imgPreload){r.imgPreload.onload=r.imgPreload.onerror=null}if(s.wrap){s.wrap.stop(true,true).trigger("onReset").remove()}r.coming=null;if(!r.current){r._afterZoomOut(s)}},close:function(s){r.cancel();if(false===r.trigger("beforeClose")){return}r.unbindEvents();if(!r.isActive){return}if(!r.isOpen||s===true){j(".fancybox-wrap").stop(true).trigger("onReset").remove();r._afterZoomOut()}else{r.isOpen=r.isOpened=false;r.isClosing=true;j(".fancybox-item, .fancybox-nav").remove();r.wrap.stop(true,true).removeClass("fancybox-opened");r.transitions[r.current.closeMethod]()}},play:function(u){var s=function(){clearTimeout(r.player.timer)},w=function(){s();if(r.current&&r.player.isActive){r.player.timer=setTimeout(r.next,r.current.playSpeed)}},t=function(){s();a.unbind(".player");r.player.isActive=false;r.trigger("onPlayEnd")},v=function(){if(r.current&&(r.current.loop||r.current.index<r.group.length-1)){r.player.isActive=true;a.bind({"onCancel.player beforeClose.player":t,"onUpdate.player":w,"beforeLoad.player":s});w();r.trigger("onPlayStart")}};if(u===true||(!r.player.isActive&&u!==false)){v()}else{t()}},next:function(t){var s=r.current;if(s){if(!b(t)){t=s.direction.next}r.jumpto(s.index+1,t,"next")}},prev:function(t){var s=r.current;if(s){if(!b(t)){t=s.direction.prev}r.jumpto(s.index-1,t,"prev")}},jumpto:function(t,v,s){var u=r.current;if(!u){return}t=o(t);r.direction=v||u.direction[(t>=u.index?"next":"prev")];r.router=s||"jumpto";if(u.loop){if(t<0){t=u.group.length+(t%u.group.length)}t=t%u.group.length}if(u.group[t]!==e){r.cancel();r._start(t)}},reposition:function(v,s){var u=r.current,t=u?u.wrap:null,w;if(t){w=r._getPosition(s);if(v&&v.type==="scroll"){delete w.position;t.stop(true,true).animate(w,200)}else{t.css(w);u.pos=j.extend({},u.dim,w)}}},update:function(u){var s=(u&&u.type),t=!s||s==="orientationchange";if(t){clearTimeout(c);c=null}if(!r.isOpen||c){return}c=setTimeout(function(){var v=r.current;if(!v||r.isClosing){return}r.wrap.removeClass("fancybox-tmp");if(t||s==="load"||(s==="resize"&&v.autoResize)){r._setDimension()}if(!(s==="scroll"&&v.canShrink)){r.reposition(u)}r.trigger("onUpdate");c=null},(t&&!f?0:300))},toggle:function(s){if(r.isOpen){r.current.fitToView=j.type(s)==="boolean"?s:!r.current.fitToView;if(f){r.wrap.removeAttr("style").addClass("fancybox-tmp");r.trigger("onUpdate")}r.update()}},hideLoading:function(){a.unbind(".loading");j("#fancybox-loading").remove()},showLoading:function(){var t,s;r.hideLoading();t=j('<div id="fancybox-loading"><div></div></div>').click(r.cancel).appendTo("body");a.bind("keydown.loading",function(u){if((u.which||u.keyCode)===27){u.preventDefault();r.cancel()}});if(!r.defaults.fixed){s=r.getViewport();t.css({position:"absolute",top:(s.h*0.5)+s.y,left:(s.w*0.5)+s.x})}},getViewport:function(){var s=(r.current&&r.current.locked)||false,t={x:d.scrollLeft(),y:d.scrollTop()};if(s){t.w=s[0].clientWidth;t.h=s[0].clientHeight}else{t.w=f&&m.innerWidth?m.innerWidth:d.width();t.h=f&&m.innerHeight?m.innerHeight:d.height()}return t},unbindEvents:function(){if(r.wrap&&k(r.wrap)){r.wrap.unbind(".fb")}a.unbind(".fb");d.unbind(".fb")},bindEvents:function(){var t=r.current,s;if(!t){return}d.bind("orientationchange.fb"+(f?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),r.update);s=t.keys;if(s){a.bind("keydown.fb",function(w){var u=w.which||w.keyCode,v=w.target||w.srcElement;if(u===27&&r.coming){return false}if(!w.ctrlKey&&!w.altKey&&!w.shiftKey&&!w.metaKey&&!(v&&(v.type||j(v).is("[contenteditable]")))){j.each(s,function(x,y){if(t.group.length>1&&y[u]!==e){r[x](y[u]);w.preventDefault();return false}if(j.inArray(u,y)>-1){r[x]();w.preventDefault();return false}})}})}if(j.fn.mousewheel&&t.mouseWheel){r.wrap.bind("mousewheel.fb",function(z,A,v,u){var y=z.target||null,w=j(y),x=false;while(w.length){if(x||w.is(".fancybox-skin")||w.is(".fancybox-wrap")){break}x=h(w[0]);w=j(w).parent()}if(A!==0&&!x){if(r.group.length>1&&!t.canShrink){if(u>0||v>0){r.prev(u>0?"down":"left")}else{if(u<0||v<0){r.next(u<0?"up":"right")}}z.preventDefault()}}})}},trigger:function(t,v){var s,u=v||r.coming||r.current;if(!u){return}if(j.isFunction(u[t])){s=u[t].apply(u,Array.prototype.slice.call(arguments,1))}if(s===false){return false}if(u.helpers){j.each(u.helpers,function(x,w){if(w&&r.helpers[x]&&j.isFunction(r.helpers[x][t])){r.helpers[x][t](j.extend(true,{},r.helpers[x].defaults,w),u)}})}a.trigger(t)},isImage:function(s){return b(s)&&s.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(s){return b(s)&&s.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var u={},y,s,v,w,x;t=o(t);y=r.group[t]||null;if(!y){return false}u=j.extend(true,{},r.opts,y);w=u.margin;x=u.padding;if(j.type(w)==="number"){u.margin=[w,w,w,w]}if(j.type(x)==="number"){u.padding=[x,x,x,x]}if(u.modal){j.extend(true,u,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}})}if(u.autoSize){u.autoWidth=u.autoHeight=true}if(u.width==="auto"){u.autoWidth=true}if(u.height==="auto"){u.autoHeight=true}u.group=r.group;u.index=t;r.coming=u;if(false===r.trigger("beforeLoad")){r.coming=null;return}v=u.type;s=u.href;if(!v){r.coming=null;if(r.current&&r.router&&r.router!=="jumpto"){r.current.index=t;return r[r.router](r.direction)}return false}r.isActive=true;if(v==="image"||v==="swf"){u.autoHeight=u.autoWidth=false;u.scrolling="visible"}if(v==="image"){u.aspectRatio=true}if(v==="iframe"&&f){u.scrolling="scroll"}u.wrap=j(u.tpl.wrap).addClass("fancybox-"+(f?"mobile":"desktop")+" fancybox-type-"+v+" fancybox-tmp "+u.wrapCSS).appendTo(u.parent||"body");j.extend(u,{skin:j(".fancybox-skin",u.wrap),outer:j(".fancybox-outer",u.wrap),inner:j(".fancybox-inner",u.wrap)});j.each(["Top","Right","Bottom","Left"],function(A,z){u.skin.css("padding"+z,g(u.padding[A]))});r.trigger("onReady");if(v==="inline"||v==="html"){if(!u.content||!u.content.length){return r._error("content")}}else{if(!s){return r._error("href")}}if(v==="image"){r._loadImage()}else{if(v==="ajax"){r._loadAjax()}else{if(v==="iframe"){r._loadIframe()}else{r._afterLoad()}}}},_error:function(s){j.extend(r.coming,{type:"html",autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:"no",hasError:s,content:r.coming.tpl.error});r._afterLoad()},_loadImage:function(){var s=r.imgPreload=new Image();s.onload=function(){this.onload=this.onerror=null;r.coming.width=this.width/r.opts.pixelRatio;r.coming.height=this.height/r.opts.pixelRatio;r._afterLoad()};s.onerror=function(){this.onload=this.onerror=null;r._error("image")};s.src=r.coming.href;if(s.complete!==true){r.showLoading()}},_loadAjax:function(){var s=r.coming;r.showLoading();r.ajaxLoad=j.ajax(j.extend({},s.ajax,{url:s.href,error:function(t,u){if(r.coming&&u!=="abort"){r._error("ajax",t)}else{r.hideLoading()}},success:function(t,u){if(u==="success"){s.content=t;r._afterLoad()}}}))},_loadIframe:function(){var s=r.coming,t=j(s.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",f?"auto":s.iframe.scrolling).attr("src",s.href);j(s.wrap).bind("onReset",function(){try{j(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(u){}});if(s.iframe.preload){r.showLoading();t.one("load",function(){j(this).data("ready",1);if(!f){j(this).bind("load.fb",r.update)}j(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();r._afterLoad()})}s.content=t.appendTo(s.inner);if(!s.iframe.preload){r._afterLoad()}},_preloadImages:function(){var x=r.group,w=r.current,s=x.length,u=w.preload?Math.min(w.preload,s-1):0,v,t;for(t=1;t<=u;t+=1){v=x[(w.index+t)%s];if(v.type==="image"&&v.href){new Image().src=v.href}}},_afterLoad:function(){var t=r.coming,v=r.current,A="fancybox-placeholder",x,y,z,u,s,w;r.hideLoading();if(!t||r.isActive===false){return}if(false===r.trigger("afterLoad",t,v)){t.wrap.stop(true).trigger("onReset").remove();r.coming=null;return}if(v){r.trigger("beforeChange",v);v.wrap.stop(true).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()}r.unbindEvents();x=t;y=t.content;z=t.type;u=t.scrolling;j.extend(r,{wrap:x.wrap,skin:x.skin,outer:x.outer,inner:x.inner,current:x,previous:v});s=x.href;switch(z){case"inline":case"ajax":case"html":if(x.selector){y=j("<div>").html(y).find(x.selector)}else{if(k(y)){if(!y.data(A)){y.data(A,j('<div class="'+A+'"></div>').insertAfter(y).hide())}y=y.show().detach();x.wrap.bind("onReset",function(){if(j(this).find(y).length){y.hide().replaceAll(y.data(A)).data(A,false)}})}}break;case"image":y=x.tpl.image.replace("{href}",s);break;case"swf":y='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+s+'"></param>';w="";j.each(x.swf,function(B,C){y+='<param name="'+B+'" value="'+C+'"></param>';w+=" "+B+'="'+C+'"'});y+='<embed src="'+s+'" type="application/x-shockwave-flash" width="100%" height="100%"'+w+"></embed></object>";break}if(!(k(y)&&y.parent().is(x.inner))){x.inner.append(y)}r.trigger("beforeShow");x.inner.css("overflow",u==="yes"?"scroll":(u==="no"?"hidden":u));r._setDimension();r.reposition();r.isOpen=false;r.coming=null;r.bindEvents();if(!r.isOpened){j(".fancybox-wrap").not(x.wrap).stop(true).trigger("onReset").remove()}else{if(v.prevMethod){r.transitions[v.prevMethod]()}}r.transitions[r.isOpened?x.nextMethod:x.openMethod]();r._preloadImages()},_setDimension:function(){var V=r.getViewport(),R=0,X=false,Z=false,D=r.wrap,P=r.skin,aa=r.inner,M=r.current,N=M.width,K=M.height,G=M.minWidth,z=M.minHeight,T=M.maxWidth,L=M.maxHeight,F=M.scrolling,x=M.scrollOutside?M.scrollbarWidth:0,J=M.margin,y=o(J[1]+J[3]),w=o(J[0]+J[2]),u,t,Q,S,I,H,O,B,A,W,v,Y,s,C,E;D.add(P).add(aa).width("auto").height("auto").removeClass("fancybox-tmp");u=o(P.outerWidth(true)-P.width());t=o(P.outerHeight(true)-P.height());Q=y+u;S=w+t;I=n(N)?(V.w-Q)*o(N)/100:N;H=n(K)?(V.h-S)*o(K)/100:K;if(M.type==="iframe"){C=M.content;if(M.autoHeight&&C.data("ready")===1){try{if(C[0].contentWindow.document.location){aa.width(I).height(9999);E=C.contents().find("body");if(x){E.css("overflow-x","hidden")}H=E.outerHeight(true)}}catch(U){}}}else{if(M.autoWidth||M.autoHeight){aa.addClass("fancybox-tmp");if(!M.autoWidth){aa.width(I)}if(!M.autoHeight){aa.height(H)}if(M.autoWidth){I=aa.width()}if(M.autoHeight){H=aa.height()}aa.removeClass("fancybox-tmp")}}N=o(I);K=o(H);A=I/H;G=o(n(G)?o(G,"w")-Q:G);T=o(n(T)?o(T,"w")-Q:T);z=o(n(z)?o(z,"h")-S:z);L=o(n(L)?o(L,"h")-S:L);O=T;B=L;if(M.fitToView){T=Math.min(V.w-Q,T);L=Math.min(V.h-S,L)}Y=V.w-y;s=V.h-w;if(M.aspectRatio){if(N>T){N=T;K=o(N/A)}if(K>L){K=L;N=o(K*A)}if(N<G){N=G;K=o(N/A)}if(K<z){K=z;N=o(K*A)}}else{N=Math.max(G,Math.min(N,T));if(M.autoHeight&&M.type!=="iframe"){aa.width(N);K=aa.height()}K=Math.max(z,Math.min(K,L))}if(M.fitToView){aa.width(N).height(K);D.width(N+u);W=D.width();v=D.height();if(M.aspectRatio){while((W>Y||v>s)&&N>G&&K>z){if(R++>19){break}K=Math.max(z,Math.min(L,K-10));N=o(K*A);if(N<G){N=G;K=o(N/A)}if(N>T){N=T;K=o(N/A)}aa.width(N).height(K);D.width(N+u);W=D.width();v=D.height()}}else{N=Math.max(G,Math.min(N,N-(W-Y)));K=Math.max(z,Math.min(K,K-(v-s)))}}if(x&&F==="auto"&&K<H&&(N+u+x)<Y){N+=x}aa.width(N).height(K);D.width(N+u);W=D.width();v=D.height();X=(W>Y||v>s)&&N>G&&K>z;Z=M.aspectRatio?(N<O&&K<B&&N<I&&K<H):((N<O||K<B)&&(N<I||K<H));j.extend(M,{dim:{width:g(W),height:g(v)},origWidth:I,origHeight:H,canShrink:X,canExpand:Z,wPadding:u,hPadding:t,wrapSpace:v-P.outerHeight(true),skinSpace:P.height()-K});if(!C&&M.autoHeight&&K>z&&K<L&&!Z){aa.height("auto")}},_getPosition:function(u){var y=r.current,t=r.getViewport(),w=y.margin,v=r.wrap.width()+w[1]+w[3],s=r.wrap.height()+w[0]+w[2],x={position:"absolute",top:w[0],left:w[3]};if(y.autoCenter&&y.fixed&&!u&&s<=t.h&&v<=t.w){x.position="fixed"}else{if(!y.locked){x.top+=t.y;x.left+=t.x}}x.top=g(Math.max(x.top,x.top+((t.h-s)*y.topRatio)));x.left=g(Math.max(x.left,x.left+((t.w-v)*y.leftRatio)));return x},_afterZoomIn:function(){var s=r.current;if(!s){return}r.isOpen=r.isOpened=true;r.wrap.css("overflow","visible").addClass("fancybox-opened");r.update();if(s.closeClick||(s.nextClick&&r.group.length>1)){r.inner.css("cursor","pointer").bind("click.fb",function(t){if(!j(t.target).is("a")&&!j(t.target).parent().is("a")){t.preventDefault();r[s.closeClick?"close":"next"]()}})}if(s.closeBtn){j(s.tpl.closeBtn).appendTo(r.skin).bind("click.fb",function(t){t.preventDefault();r.close()})}if(s.arrows&&r.group.length>1){if(s.loop||s.index>0){j(s.tpl.prev).appendTo(r.outer).bind("click.fb",r.prev)}if(s.loop||s.index<r.group.length-1){j(s.tpl.next).appendTo(r.outer).bind("click.fb",r.next)}}r.trigger("afterShow");if(!s.loop&&s.index===s.group.length-1){r.play(false)}else{if(r.opts.autoPlay&&!r.player.isActive){r.opts.autoPlay=false;r.play()}}},_afterZoomOut:function(s){s=s||r.current;j(".fancybox-wrap").trigger("onReset").remove();j.extend(r,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});r.trigger("afterClose",s)}});r.transitions={getOrigPosition:function(){var v=r.current,t=v.element,y=v.orig,x={},s=50,z=50,w=v.hPadding,A=v.wPadding,u=r.getViewport();if(!y&&v.isDom&&t.is(":visible")){y=t.find("img:first");if(!y.length){y=t}}if(k(y)){x=y.offset();if(y.is("img")){s=y.outerWidth();z=y.outerHeight()}}else{x.top=u.y+(u.h-z)*v.topRatio;x.left=u.x+(u.w-s)*v.leftRatio}if(r.wrap.css("position")==="fixed"||v.locked){x.top-=u.y;x.left-=u.x}x={top:g(x.top-w*v.topRatio),left:g(x.left-A*v.leftRatio),width:g(s+A),height:g(z+w)};return x},step:function(t,u){var w,y,z,s=u.prop,v=r.current,x=v.wrapSpace,A=v.skinSpace;if(s==="width"||s==="height"){w=u.end===u.start?1:(t-u.start)/(u.end-u.start);if(r.isClosing){w=1-w}y=s==="width"?v.wPadding:v.hPadding;z=t-y;r.skin[s](o(s==="width"?z:z-(x*w)));r.inner[s](o(s==="width"?z:z-(x*w)-(A*w)))}},zoomIn:function(){var w=r.current,t=w.pos,u=w.openEffect,v=u==="elastic",s=j.extend({opacity:1},t);delete s.position;if(v){t=this.getOrigPosition();if(w.openOpacity){t.opacity=0.1}}else{if(u==="fade"){t.opacity=0.1}}r.wrap.css(t).animate(s,{duration:u==="none"?0:w.openSpeed,easing:w.openEasing,step:v?this.step:null,complete:r._afterZoomIn})},zoomOut:function(){var v=r.current,t=v.closeEffect,u=t==="elastic",s={opacity:0.1};if(u){s=this.getOrigPosition();if(v.closeOpacity){s.opacity=0.1}}r.wrap.animate(s,{duration:t==="none"?0:v.closeSpeed,easing:v.closeEasing,step:u?this.step:null,complete:r._afterZoomOut})},changeIn:function(){var x=r.current,u=x.nextEffect,t=x.pos,s={opacity:1},w=r.direction,y=200,v;t.opacity=0.1;if(u==="elastic"){v=w==="down"||w==="up"?"top":"left";if(w==="down"||w==="right"){t[v]=g(o(t[v])-y);s[v]="+="+y+"px"}else{t[v]=g(o(t[v])+y);s[v]="-="+y+"px"}}if(u==="none"){r._afterZoomIn()}else{r.wrap.css(t).animate(s,{duration:x.nextSpeed,easing:x.nextEasing,complete:r._afterZoomIn})}},changeOut:function(){var u=r.previous,t=u.prevEffect,s={opacity:0.1},v=r.direction,w=200;if(t==="elastic"){s[v==="down"||v==="up"?"top":"left"]=(v==="up"||v==="left"?"-":"+")+"="+w+"px"}u.wrap.animate(s,{duration:t==="none"?0:u.prevSpeed,easing:u.prevEasing,complete:function(){j(this).trigger("onReset").remove()}})}};r.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!f,fixed:true},overlay:null,fixed:false,el:j("html"),create:function(s){s=j.extend({},this.defaults,s);if(this.overlay){this.close()}this.overlay=j('<div class="fancybox-overlay"></div>').appendTo(r.coming?r.coming.parent:s.parent);this.fixed=false;if(s.fixed&&r.defaults.fixed){this.overlay.addClass("fancybox-overlay-fixed");this.fixed=true}},open:function(t){var s=this;t=j.extend({},this.defaults,t);if(this.overlay){this.overlay.unbind(".overlay").width("auto").height("auto")}else{this.create(t)}if(!this.fixed){d.bind("resize.overlay",j.proxy(this.update,this));this.update()}if(t.closeClick){this.overlay.bind("click.overlay",function(u){if(j(u.target).hasClass("fancybox-overlay")){if(r.isActive){r.close()}else{s.close()}return false}})}this.overlay.css(t.css).show()},close:function(){var s,t;d.unbind("resize.overlay");if(this.el.hasClass("fancybox-lock")){j(".fancybox-margin").removeClass("fancybox-margin");s=d.scrollTop();t=d.scrollLeft();this.el.removeClass("fancybox-lock");d.scrollTop(s).scrollLeft(t)}j(".fancybox-overlay").remove().hide();j.extend(this,{overlay:null,fixed:false})},update:function(){var t="100%",s;this.overlay.width(t).height("100%");if(l){s=Math.max(p.documentElement.offsetWidth,p.body.offsetWidth);if(a.width()>s){t=a.width()}}else{if(a.width()>d.width()){t=a.width()}}this.overlay.width(t).height(a.height())},onReady:function(t,u){var s=this.overlay;j(".fancybox-overlay").stop(true,true);if(!s){this.create(t)}if(t.locked&&this.fixed&&u.fixed){if(!s){this.margin=a.height()>d.height()?j("html").css("margin-right").replace("px",""):false}u.locked=this.overlay.append(u.wrap);u.fixed=false}if(t.showEarly===true){this.beforeShow.apply(this,arguments)}},beforeShow:function(u,v){var s,t;if(v.locked){if(this.margin!==false){j("*").filter(function(){return(j(this).css("position")==="fixed"&&!j(this).hasClass("fancybox-overlay")&&!j(this).hasClass("fancybox-wrap"))}).addClass("fancybox-margin");this.el.addClass("fancybox-margin")}s=d.scrollTop();t=d.scrollLeft();this.el.addClass("fancybox-lock");d.scrollTop(s).scrollLeft(t)}this.open(u)},onUpdate:function(){if(!this.fixed){this.update()}},afterClose:function(s){if(this.overlay&&!r.coming){this.overlay.fadeOut(s.speedOut,j.proxy(this.close,this))}}};r.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var v=r.current,x=v.title,s=t.type,w,u;if(j.isFunction(x)){x=x.call(v.element,v)}if(!b(x)||j.trim(x)===""){return}w=j('<div class="fancybox-title fancybox-title-'+s+'-wrap">'+x+"</div>");switch(s){case"inside":u=r.skin;break;case"outside":u=r.wrap;break;case"over":u=r.inner;break;default:u=r.skin;w.appendTo("body");if(l){w.width(w.width())}w.wrapInner('<span class="child"></span>');r.current.margin[2]+=Math.abs(o(w.css("margin-bottom")));break}w[(t.position==="top"?"prependTo":"appendTo")](u)}};j.fn.fancybox=function(u){var t,v=j(this),s=this.selector||"",w=function(A){var z=j(this).blur(),x=t,y,B;if(!(A.ctrlKey||A.altKey||A.shiftKey||A.metaKey)&&!z.is(".fancybox-wrap")){y=u.groupAttr||"data-fancybox-group";B=z.attr(y);if(!B){y="rel";B=z.get(0)[y]}if(B&&B!==""&&B!=="nofollow"){z=s.length?j(s):v;z=z.filter("["+y+'="'+B+'"]');x=z.index(this)}u.index=x;if(r.open(z,u)!==false){A.preventDefault()}}};u=u||{};t=u.index||0;if(!s||u.live===false){v.unbind("click.fb-start").bind("click.fb-start",w)}else{a.undelegate(s,"click.fb-start").delegate(s+":not('.fancybox-item, .fancybox-nav')","click.fb-start",w)}this.filter("[data-fancybox-start=1]").trigger("click");return this};a.ready(function(){var t,s;if(j.scrollbarWidth===e){j.scrollbarWidth=function(){var v=j('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),w=v.children(),u=w.innerWidth()-w.height(99).innerWidth();v.remove();return u}}if(j.support.fixedPosition===e){j.support.fixedPosition=(function(){var v=j('<div style="position:fixed;top:20px;"></div>').appendTo("body"),u=(v[0].offsetTop===20||v[0].offsetTop===15);v.remove();return u}())}j.extend(r.defaults,{scrollbarWidth:j.scrollbarWidth(),fixed:j.support.fixedPosition,parent:j("body")});t=j(m).width();q.addClass("fancybox-lock-test");s=j(m).width();q.removeClass("fancybox-lock-test");j("<style type='text/css'>.fancybox-margin{margin-right:"+(s-t)+"px;}</style>").appendTo("head")})}(window,document,jQuery));(function(){if(!Array.prototype.forEach){Array.prototype.forEach=function(e,d){for(var c=0,b=this.length;c<b;++c){e.call(d||this,this[c],c,this)}}}Function.prototype.bind=(function(){var b=Array.prototype.slice;return function(d){var e=this,c=b.call(arguments,1);if(c.length){return function(){return arguments.length?e.apply(d,b.call(arguments).concat(c)):e.apply(d,c)}}return function(){return arguments.length?e.apply(d,arguments):e.call(d)}}})();String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.unparam=function(){var f={},d=this.replace("?","").split("&"),e,c,b;for(c=0,b=d.length;c<b;c++){e=d[c].split("=",2);f[decodeURIComponent(e[0])]=(e.length==2?decodeURIComponent(e[1].replace(/\+/g," ")):true)}return f};jQuery.unparam=function(b){return b.unparam()};(function(){var b=false,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(h){var g=this.prototype;b=true;var f=new this();b=false;for(var e in h){f[e]=typeof h[e]=="function"&&typeof g[e]=="function"&&c.test(h[e])?(function(j,k){return function(){var m=this._super;this._super=g[j];var l=k.apply(this,arguments);this._super=m;return l}})(e,h[e]):h[e]}function d(){if(!b&&this._construct){this._construct.apply(this,arguments)}}d.prototype=f;d.constructor=d;d.extend=arguments.callee;return d}})();$empty=function(){};$returnTrue=function(){return true};String.format=function(){var d=arguments[0];for(var b=0;b<arguments.length-1;b++){var c=new RegExp("\\{"+b+"\\}","gm");d=d.replace(c,arguments[b+1])}return d};$.fn.clearForm=function(){return this.each(function(){$(this).data("validator").resetForm();$(":input",this).each(function(){var d=this.type,b=this.tagName.toLowerCase();if(d=="text"||d=="password"||b=="textarea"){this.value=""}else{if(d=="checkbox"||d=="radio"){this.checked=false;elm=$(this).parent();if($(this).is(":checked")){elm.addClass("checked")}else{elm.removeClass("checked")}}else{if(b=="select"){this.selectedIndex=-1;var c=$(this).attr("id");$(this).prev().text($(c+" :selected").text())}}}})})};function a(f){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";var d="";for(var c=0;c<f;c++){var b=Math.floor(Math.random()*e.length);d+=e.substring(b,b+1)}return d}$log=function(b){try{if(arguments.length>1){console.dir(arguments)}else{console.log(arguments[0])}}catch(c){}}}());(function(b){var a=Quince={resetpassword:null,isUserLoggedIn:false,contentManagementSysURL:"",_uid:0,isIE:(b("html").is(".ie9, .ie8")),isFF:navigator.userAgent.indexOf("Firefox")>0,isHandheldPortrait:b("body").width()<450&&b("body").height()>b("body").width(),landingContent:null,googleAccount:"UA-1007198-3",init:function(){if(b.support.touch){b("body").addClass("ipad-iphone")}this.setupEventManager();$log("QUINCE:INIT isHandheld:"+this.isHandheldPortrait+" isFireFox:"+this.isFF)},animationHelper:function(e,d,c){b("<div />").css({position:"absolute",left:e}).animate({left:d},c)},bindToDocument:function(c,d){if(!document[c+"_callbacks"]){document[c+"_callbacks"]=[]}document[c+"_callbacks"].push(d);if(!document[c+"_registered"]){b(document).bind(c,this.handleDocumentEvent.bind(this,c));document[c+"_registered"]=true}},handleDocumentEvent:function(f,d){var c=document[d+"_callbacks"];b(c).each(function(e){c[e]()})},setupEventManager:function(){this.eventManager=new Quince.Event()},fireHashEvents:function(){var c=document.location.hash.toString().replace("#","");this._getPopup(c);Quince.eventManager.fireEvent(Quince.Event.SHOWPOPUP,c)},_popups:{},_currentPopup:null,popup:function(e,d){var c=this._getPopup(d);if(c!=null){c.show(d);this._currentPopup=d}},_getPopup:function(d){var c=this._popups[d];if(c==null){switch(d){case"register":c=new Quince.Registration();break;case"sign-in":c=new Quince.Login();break}this._popups[d]=c}return c}};Quince.Event=Class.extend({_construct:function(){this.__event={}},addEventHandler:function(d,c){if(!this.__event[d]){this.__event[d]=new Array()}if(b.inArray(c,this.__event[d])<0){this.__event[d].push(c)}return this},removeEventHandler:function(e,d){var c=b.inArray(d,this.__event[e]);if(c>=0){this.__event[e].splice(c,1)}return this},removeEventHandlers:function(c){this.__event[c].length=0;return this},fireEvent:function(d){if(this.__event[d]){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.push(d);for(i=0;i<this.__event[d].length;i++){this.__event[d][i].apply(this,c)}}else{for(i=0;i<this.__event[d].length;i++){this.__event[d][i](d)}}}}});Quince.EventManager=new Quince.Event();Quince.Event.SHOWPOPUP="SHOWPOPUP";Quince.Event.PAGECHANGE="PAGECHANGE";Quince.Event.DISCLAIMER="DISCLAIMER";Quince.Event.CURRENTPAGE="CURRENTPAGE";this.Quince=Quince})(jQuery);Quince.init();(function(b,a){a.Page=Class.extend({_construct:function(c){this._el=b(c)}});b.extend(a.Page,{_selectors:{},_extend:a.Page.extend,extend:function(e,d){var c=a.Page._extend(e);if(typeof d=="string"){a.Page._selectors[d]=c}return c},Init:function(){b.each(a.Page._selectors,function(d,c){b(d).each(function(){var e=new c(this);b(this).data(d,e)})})}});a.Page.Home=a.Page.extend({_construct:function(c){this._el=b(c);this._super(this._el);$log("Register init");this.toplinks=b(this._el.find(".header .toplink"));this.subcontentOpened=false;this.currentContent=null;this.contentSwap=null;this.initPage()},initPage:function(){this.toplinks.click(b.proxy(this.toplinkAnimate,this))},onOpenTransitionEnd:function(){this.subcontentOpened=true;this._el.bind("tap click swipe focus",b.proxy(this.pageOver,this));$log("OPEN TRANSITION END - subcontentOpened:"+this.subcontentOpened)},onCloseTransitionEnd:function(){$log("CLOSE TRANSITION END - subcontentOpened:"+this.subcontentOpened);if(this.subcontentOpened==true){this.subcontentOpened=false;this.currentContent.hide();this.currentContent=null;this.setScrollable(true);if(this.contentSwap!=null){b(this.contentSwap).trigger("click");$log("CONTENT SWAP:"+this.contentSwap);this.contentSwap=null}}},pageOver:function(c){var d=this;if(this.subcontentOpened){this._el.animate({top:"0"},500,function(){d.onCloseTransitionEnd()})}this._el.mouseover(null);this._el.unbind("tap click swipe focus")},toplinkAnimate:function(j){j.preventDefault();var l=b(j.currentTarget)[0];var h="."+l.id+"-content";var f=b(h);var k=this;if(this.subcontentOpened==false){f.show();var g=f.find(".content")[0];var d=b(g).height()+(b("body").hasClass("ipad-iphone")?10:40);$log("TOPLINKACTION: subOpened:"+this.subcontentOpened+" targetHeight:"+d+" currentContent:",this.currentContent);this.setScrollable(false);this.currentContent=f;this._el.animate({top:d},500,function(){k.onOpenTransitionEnd()})}else{$log("TOPLINKACTION: subOpened:"+this.subcontentOpened+" currentContent:",this.currentContent);if(this.currentContent!==f){this.contentSwap=l}this._el.animate({top:"0"},500,function(){k.onCloseTransitionEnd()})}},onRevealComplete:function(){$log("--GREENSOCK WORKS")},setScrollable:function(c){var d=b("html, body");if(!c){d.css({overflow:"hidden",height:"100%"})}else{d.css({overflow:"auto",height:"100%"})}}});a.Page.Init();if(b(".home-content").length>0){this.landingContent=new a.Page.Home(".home-content")}})(jQuery,Quince);(function(){var a=["android","webos","iphone","ipad","blackberry"];for(i in a){if(navigator.userAgent.toLowerCase().indexOf(a[i])!=-1){$(document).data("mobile",navigator.userAgent)}}})();(function(){var e;var d=function(){};var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var c=b.length;var a=(window.console=window.console||{});while(c--){e=b[c];if(!a[e]){a[e]=d}}}());var _gaq=_gaq||[];_gaq.push(["_setAccount",Quince.googleAccount]);_gaq.push(["_trackPageview"]);console.log("GA: "+Quince.googleAccount);(function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})();(function(a){window.MBP=window.MBP||{};MBP.viewportmeta=a.querySelector&&a.querySelector('meta[name="viewport"]');MBP.ua=navigator.userAgent;MBP.scaleFix=function(){if(MBP.viewportmeta&&/iPhone|iPad|iPod/.test(MBP.ua)&&!/Opera Mini/.test(MBP.ua)){MBP.viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0";a.addEventListener("gesturestart",MBP.gestureStart,false)}};MBP.gestureStart=function(){MBP.viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"};MBP.BODY_SCROLL_TOP=false;MBP.getScrollTop=function(){var e=window;var d=a;return e.pageYOffset||d.compatMode==="CSS1Compat"&&d.documentElement.scrollTop||d.body.scrollTop||0};MBP.hideUrlBar=function(){var d=window;if(!location.hash&&MBP.BODY_SCROLL_TOP!==false){d.scrollTo(0,MBP.BODY_SCROLL_TOP===1?0:1)}};MBP.hideUrlBarOnLoad=function(){var f=window;var e=f.document;var d;if(!location.hash&&f.addEventListener){window.scrollTo(0,1);MBP.BODY_SCROLL_TOP=1;d=setInterval(function(){if(e.body){clearInterval(d);MBP.BODY_SCROLL_TOP=MBP.getScrollTop();MBP.hideUrlBar()}},15);f.addEventListener("load",function(){setTimeout(function(){if(MBP.getScrollTop()<20){MBP.hideUrlBar()}},0)})}};MBP.fastButton=function(e,f,d){this.handler=f;this.pressedClass=typeof d==="undefined"?"pressed":d;MBP.listenForGhostClicks();if(e.length&&e.length>1){for(var g in e){this.addClickEvent(e[g])}}else{this.addClickEvent(e)}};MBP.fastButton.prototype.handleEvent=function(d){d=d||window.event;switch(d.type){case"touchstart":this.onTouchStart(d);break;case"touchmove":this.onTouchMove(d);break;case"touchend":this.onClick(d);break;case"click":this.onClick(d);break}};MBP.fastButton.prototype.onTouchStart=function(e){var d=e.target||e.srcElement;e.stopPropagation();d.addEventListener("touchend",this,false);a.body.addEventListener("touchmove",this,false);this.startX=e.touches[0].clientX;this.startY=e.touches[0].clientY;d.className+=" "+this.pressedClass};MBP.fastButton.prototype.onTouchMove=function(d){if(Math.abs(d.touches[0].clientX-this.startX)>10||Math.abs(d.touches[0].clientY-this.startY)>10){this.reset(d)}};MBP.fastButton.prototype.onClick=function(e){e=e||window.event;var d=e.target||e.srcElement;if(e.stopPropagation){e.stopPropagation()}this.reset(e);this.handler.apply(e.currentTarget,[e]);if(e.type=="touchend"){MBP.preventGhostClick(this.startX,this.startY)}var f=new RegExp(" ?"+this.pressedClass,"gi");d.className=d.className.replace(f,"")};MBP.fastButton.prototype.reset=function(e){var d=e.target||e.srcElement;b(d,"touchend",this,false);b(a.body,"touchmove",this,false);var f=new RegExp(" ?"+this.pressedClass,"gi");d.className=d.className.replace(f,"")};MBP.fastButton.prototype.addClickEvent=function(d){c(d,"touchstart",this,false);c(d,"click",this,false)};MBP.preventGhostClick=function(d,e){MBP.coords.push(d,e);window.setTimeout(function(){MBP.coords.splice(0,2)},2500)};MBP.ghostClickHandler=function(g){if(!MBP.hadTouchEvent&&MBP.dodgyAndroid){g.stopPropagation();g.preventDefault();return}for(var f=0,e=MBP.coords.length;f<e;f+=2){var d=MBP.coords[f];var h=MBP.coords[f+1];if(Math.abs(g.clientX-d)<25&&Math.abs(g.clientY-h)<25){g.stopPropagation();g.preventDefault()}}};MBP.dodgyAndroid=("ontouchstart" in window)&&(navigator.userAgent.indexOf("Android 2.3")!=-1);MBP.listenForGhostClicks=(function(){var d=false;return function(){if(d){return}if(a.addEventListener){a.addEventListener("click",MBP.ghostClickHandler,true)}c(a.documentElement,"touchstart",function(){MBP.hadTouchEvent=true},false);d=true}})();MBP.coords=[];function c(h,f,g,d){if("addEventListener" in h){try{h.addEventListener(f,g,d)}catch(j){if(typeof g=="object"&&g.handleEvent){h.addEventListener(f,function(k){g.handleEvent.call(g,k)},d)}else{throw j}}}else{if("attachEvent" in h){if(typeof g=="object"&&g.handleEvent){h.attachEvent("on"+f,function(){g.handleEvent.call(g)})}else{h.attachEvent("on"+f,g)}}}}function b(h,f,g,d){if("removeEventListener" in h){try{h.removeEventListener(f,g,d)}catch(j){if(typeof g=="object"&&g.handleEvent){h.removeEventListener(f,function(k){g.handleEvent.call(g,k)},d)}else{throw j}}}else{if("detachEvent" in h){if(typeof g=="object"&&g.handleEvent){h.detachEvent("on"+f,function(){g.handleEvent.call(g)})}else{h.detachEvent("on"+f,g)}}}}MBP.autogrow=function(f,d){function g(k){var j=this.scrollHeight;var l=this.clientHeight;if(j>l){this.style.height=j+3*h+"px"}}var e=(d)?d:12;var h=f.currentStyle?f.currentStyle.lineHeight:getComputedStyle(f,null).lineHeight;h=(h.indexOf("px")==-1)?e:parseInt(h,10);f.style.overflow="hidden";f.addEventListener?f.addEventListener("input",g,false):f.attachEvent("onpropertychange",g)};MBP.enableActive=function(){a.addEventListener("touchstart",function(){},false)};MBP.preventScrolling=function(){a.addEventListener("touchmove",function(d){if(d.target.type==="range"){return}d.preventDefault()},false)};MBP.preventZoom=function(){var f=a.querySelectorAll("input, select, textarea");var j="width=device-width,initial-scale=1,maximum-scale=";var d=0;var h=f.length;var g=function(){MBP.viewportmeta.content=j+"1"};var e=function(){MBP.viewportmeta.content=j+"10"};for(;d<h;d++){f[d].onfocus=g;f[d].onblur=e}};MBP.startupImage=function(){var j;var g;var h;var f;var e;var d;h=window.devicePixelRatio;f=a.getElementsByTagName("head")[0];if(navigator.platform==="iPad"){j=h===2?"img/startup/startup-tablet-portrait-retina.png":"img/startup/startup-tablet-portrait.png";g=h===2?"img/startup/startup-tablet-landscape-retina.png":"img/startup/startup-tablet-landscape.png";e=a.createElement("link");e.setAttribute("rel","apple-touch-startup-image");e.setAttribute("media","screen and (orientation: portrait)");e.setAttribute("href",j);f.appendChild(e);d=a.createElement("link");d.setAttribute("rel","apple-touch-startup-image");d.setAttribute("media","screen and (orientation: landscape)");d.setAttribute("href",g);f.appendChild(d)}else{j=h===2?"img/startup/startup-retina.png":"img/startup/startup.png";j=screen.height===568?"img/startup/startup-retina-4in.png":j;e=a.createElement("link");e.setAttribute("rel","apple-touch-startup-image");e.setAttribute("href",j);f.appendChild(e)}if((navigator.platform==="iPhone"||"iPod")&&(screen.height===568)){if(MBP.viewportmeta){MBP.viewportmeta.content=MBP.viewportmeta.content.replace(/\bwidth\s*=\s*320\b/,"width=320.1").replace(/\bwidth\s*=\s*device-width\b/,"")}}}})(document);